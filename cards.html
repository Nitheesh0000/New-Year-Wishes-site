<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Just for you</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Poppins:wght@600&display=swap" rel="stylesheet">

<style>
/* üåÑ FULL BG IMAGE */
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:url("bg.png") no-repeat center/cover;
  font-family:'Poppins',sans-serif;
  overflow:hidden;
}

/* DARK OVERLAY */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.35);
  z-index:-1;
}

/* ü©∂ MAIN GRAY CARD */
.main-card{
  position:relative;
  width:90%;
  max-width:380px;
  min-height:520px;
  background:#e6e6e6;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 20px 45px rgba(0,0,0,0.35);
  display:flex;
  justify-content:center;
  align-items:center;
}

/* üéÜ CRACKER IMAGE */
.main-card::before{
  content:"";
  position:absolute;
  inset:0;
  background:url("cracker.png") no-repeat center/cover;
  opacity:0.85;
  z-index:0;
}

/* LIGHT OVERLAY FOR TEXT */
.main-card::after{
  content:"";
  position:absolute;
  inset:0;
  background:rgba(255,255,255,0.35);
  z-index:1;
}

/* CONTENT (NO WHITE BG) */
.content{
  position:relative;
  z-index:2;
  width:90%;
  max-width:330px;
  text-align:center;
}

/* TEXT */
.title{
  font-family:'Dancing Script',cursive;
  font-size:36px;
  color:#333;
}

.subtitle{
  margin-bottom:24px;
  color:#444;
}

/* FLIP CARDS */
.cards{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:16px;
}

.card{
  width:86px;
  height:120px;
  perspective:1000px;
  cursor:pointer;
}

.card:nth-child(1){transform:rotate(-8deg)}
.card:nth-child(2){transform:rotate(-3deg)}
.card:nth-child(3){transform:rotate(4deg)}
.card:nth-child(4){transform:rotate(-2deg)}
.card:nth-child(5){transform:rotate(6deg)}

.card-inner{
  width:100%;
  height:100%;
  position:relative;
  transform-style:preserve-3d;
  transition:transform 0.8s ease;
}

.card.flipped .card-inner{
  transform:rotateY(180deg);
}

.card-front,
.card-back{
  position:absolute;
  inset:0;
  border-radius:8px;
  backface-visibility:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  box-shadow:0 8px 16px rgba(0,0,0,0.25);
}

.card-front{
  background:#ffe6e6;
  font-size:26px;
}

.card-back{
  background:#ffffff;
  transform:rotateY(180deg);
  font-size:18px;
  font-weight:bold;
  color:#333;
}

.heart{
  color:#ff5c8a;
  font-size:26px;
}

/* üíñ HEART BURST */
.heart-particle{
  position:fixed;
  font-size:22px;
  pointer-events:none;
  animation:heartBurst 1s ease-out forwards;
  z-index:999;
}

@keyframes heartBurst{
  from{transform:translate(0,0) scale(1);opacity:1}
  to{transform:translate(var(--x),var(--y)) scale(0.2);opacity:0}
}
</style>
</head>

<body>

<!-- üéµ CONTINUOUS MUSIC -->
<audio id="bgMusic" src="bg-music.mp3" loop></audio>

<div class="main-card">
  <div class="content">
    <div class="title">Just for you</div>
    
    <div class="cards">
      <div class="card" onclick="flip(this)"><div class="card-inner"><div class="card-front"><span class="heart">‚ù§</span></div><div class="card-back">Please</div></div></div>
      <div class="card" onclick="flip(this)"><div class="card-inner"><div class="card-front"><span class="heart">‚ù§</span></div><div class="card-back">Flip</div></div></div>
      <div class="card" onclick="flip(this)"><div class="card-inner"><div class="card-front"><span class="heart">‚ù§</span></div><div class="card-back">All</div></div></div>
      <div class="card" onclick="flip(this)"><div class="card-inner"><div class="card-front"><span class="heart">‚ù§</span></div><div class="card-back">Cards</div></div></div>
      <div class="card" onclick="flip(this)"><div class="card-inner"><div class="card-front"><span class="heart">‚ù§</span></div><div class="card-back">üéÅ</div></div></div>
    </div>
  </div>
</div>

<script>
/* üéµ RESUME MUSIC */
const bgMusic=document.getElementById("bgMusic");
if(sessionStorage.getItem("bg")==="on"){
  bgMusic.currentTime=parseFloat(sessionStorage.getItem("time")||0);
  bgMusic.volume=0.6;
  bgMusic.play().catch(()=>{
    document.body.addEventListener("click",()=>bgMusic.play(),{once:true});
  });
}

/* üÉè FLIP LOGIC */
let flipped=0;
const total=document.querySelectorAll(".card").length;

function flip(card){
  if(card.classList.contains("flipped")) return;
  card.classList.add("flipped");
  flipped++;
  navigator.vibrate?.(40);

  if(flipped===total){
    heartBurst();
    setTimeout(()=>{
      sessionStorage.setItem("time",bgMusic.currentTime);
      location.href="final.html";
    },1300);
  }
}

/* üíñ HEART BURST */
function heartBurst(){
  navigator.vibrate?.(120);
  for(let i=0;i<36;i++){
    const h=document.createElement("div");
    h.className="heart-particle";
    h.textContent="‚ù§";
    h.style.left="50%";
    h.style.top="50%";
    h.style.color=["#ff4d6d","#ff85a1","#ff5c8a"][Math.random()*3|0];

    const a=Math.random()*Math.PI*2;
    const d=Math.random()*260+60;
    h.style.setProperty("--x",Math.cos(a)*d+"px");
    h.style.setProperty("--y",Math.sin(a)*d+"px");

    document.body.appendChild(h);
    setTimeout(()=>h.remove(),1000);
  }
}
</script>

</body>
</html>
