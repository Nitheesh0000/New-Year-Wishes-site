<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy New Year ðŸŽ‰</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  height: 100vh;
  background: url("bg.png") no-repeat center/cover;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

/* soft white overlay */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,0.55);
  z-index: -1;
}

.container {
  text-align: center;
  z-index: 2;
}

.title {
  font-family: 'Great Vibes', cursive;
  font-size: 46px;
  margin-bottom: 30px;
  color: #333;
}

/* bounce animation */
@keyframes bounce {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.gift-box {
  width: 260px;
  margin: auto;
  position: relative;
  animation: bounce 2.4s ease-in-out infinite;
}

.gift {
  width: 100%;
  display: block;
}

.gift-shadow {
  width: 180px;
  height: 30px;
  background: radial-gradient(ellipse, rgba(0,0,0,.35), transparent 70%);
  position: absolute;
  bottom: -28px;
  left: 50%;
  transform: translateX(-50%);
  filter: blur(6px);
}

/* ðŸŽ¯ Tap bubble â€” EXACT POSITION LIKE IMAGE */
.tap-bubble {
  position: absolute;
  top: -18px;
  left: 50%;
  transform: translateX(35px);
  width: 150px;
  cursor: pointer;
  animation: bounce 2s infinite;
  z-index: 5;
}

/* ðŸŽ† CONFETTI */
.confetti {
  position: fixed;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  pointer-events: none;
  animation: blast 1.1s ease-out forwards;
}

@keyframes blast {
  0% { transform: scale(.2); opacity: 0; }
  20% { opacity: 1; }
  100% {
    transform: translate(var(--x), var(--y)) scale(1.6);
    opacity: 0;
  }
}

/* mobile */
@media(max-width:600px){
  .title{font-size:38px}
  .gift-box{width:210px}
}
</style>
</head>

<body>

<!-- ðŸŽµ Background music -->
<audio id="bgMusic" src="bg-music.mp3" loop></audio>

<!-- ðŸ”Š Pop sound -->
<audio id="popSound" src="pop.mp3" preload="auto"></audio>

<div class="container">
  <div class="title">For someone special</div>

  <div class="gift-box">

    <!-- Tap bubble -->
    <svg class="tap-bubble" viewBox="0 0 180 70" onclick="handleTap()">
      <rect x="5" y="5" rx="32" width="170" height="50" fill="#ffe6eb"/>
      <text x="90" y="38"
            text-anchor="middle"
            font-size="24"
            font-weight="bold"
            fill="#e63946">
        Tap me!
      </text>
    </svg>

    <img src="gift.png" class="gift" alt="Gift">
    <div class="gift-shadow"></div>
  </div>
</div>

<script>
let tapped = false;

function handleTap(){
  if(tapped) return;
  tapped = true;

  const pop = document.getElementById("popSound");
  const bg  = document.getElementById("bgMusic");

  /* ðŸ“³ HAPTIC */
  navigator.vibrate?.(70);

  /* ðŸ”Š POP SOUND */
  pop.volume = 1.0;
  pop.currentTime = 0;
  pop.play();

  /* ðŸŽ† CONFETTI */
  setTimeout(splash,100);

  /* ðŸŽµ START BG AFTER POP */
  pop.onended = () => {
    bg.volume = 0.8;
    bg.play();

    sessionStorage.setItem("bg", "on");

    /* allow bg music to be heard */
    setTimeout(()=>{
      sessionStorage.setItem("time", bg.currentTime);
      location.href = "next.html";
    },600);
  };
}

function splash(){
  const colors = ["#ff4d6d","#ffd166","#06d6a0","#4cc9f0","#f72585","#ffbe0b"];

  for(let i=0;i<260;i++){
    const c = document.createElement("div");
    c.className="confetti";
    c.style.background=colors[Math.random()*colors.length|0];
    c.style.left="50%";
    c.style.top="50%";

    const a=Math.random()*Math.PI*2;
    const d=Math.random()*Math.max(innerWidth,innerHeight)*1.4;
    c.style.setProperty("--x",Math.cos(a)*d+"px");
    c.style.setProperty("--y",Math.sin(a)*d+"px");

    document.body.appendChild(c);
    setTimeout(()=>c.remove(),1100);
  }
}
</script>

</body>
</html>
